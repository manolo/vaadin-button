<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
-->

<!--
`<vaadin-button>` is a Polymer element for customized buttons.

```html
<vaadin-button>
</vaadin-button>
```

@element vaadin-button
@demo demo/index.html
-->

<link rel="import" href="../polymer/polymer.html">

<style>
 vaadin-button > button {
   border: solid 1px red;
   position: absolute;
   top: 0px;
   left: 0px;
   width: 100%;
   height: 100%;
   z-index: -1;
 }
</style>

<dom-module id="vaadin-button">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
      }
      :host {
        align-items: flex-start;
        background: linear-gradient(to bottom right, #fff, #eee);
        border: 1px solid #999;
        border-radius: 2px;
        box-sizing: border-box;
        cursor: default;
        display: inline-block;
        font-size: 15px;
        letter-spacing: normal;
        margin: 0;
        padding: 2px 8px;
        text-align: center;
        text-indent: 0;
        text-rendering: auto;
        text-shadow: none;
        text-transform: none;
        word-spacing: normal;
        user-select: none;
      }

      :host(:hover) {
        border-color: #666;
      }

      :host([disabled]) {
        color: #aaa !important;
        background: #eee !important;
        border-color: #aaa !important;
        pointer-events: none;
      }

      :button:active {
        background: linear-gradient(to bottom right, #eee, #fff);
      }
    </style>
    <button id="button"
      autofocus$="[[autofocus]]"
      disabled$="[[disabled]]"
      name="[[name]]"
      value="[[value]]"
      on-focus="_onInputFocus"
      on-blur="_onInputBlur"
    >
    </button>
    <slot></slot>
  </template>

  <script>
    class VaadinButton extends Polymer.Element {
      static get is() {
        return 'vaadin-button';
      }

      static get config() {
        return {
          properties: {
            /**
             * Specify that this control should have input focus when the page loads.
             */
            autofocus: {
              type: Boolean
            },

            /**
             * Indicates that this control is not available for interaction.
             */
            disabled: {
              type: Boolean,
              reflectToAttribute: true
            },

            /**
             * The name of the control, which is submitted with the form data.
             */
            name: {
              type: String
            },

            /**
             * The initial value of the control.
             */
            value: {
              type: String,
              observer: '_valueChanged',
              notify: true
            },

            /**
             *
             */
            tabindex: {
              type: Number,
              observer: '_tabindexChanged'
            },

            /**
             * If true, the element currently has focus.
             */
            focused: {
              type: Boolean,
              notify: true,
              readOnly: true,
              reflectToAttribute: true
            }
          }
        };
      }

      ready() {
        super.ready();
        if (this.autofocus) {
          this.focus();
        }
        Polymer.dom(this).appendChild(this.$.button);
      }

      _onInputFocus() {
        this._setFocused(true);
      }

      focus() {
        this.$.button.focus();
      }

      _onInputBlur() {
        this._setFocused(false);
      }

      blur() {
        this.$.button.blur();
      }

      _tabindexChanged(tabindex) {
        if (!this._changing) {
          this._changing = true;
          this.removeAttribute('tabindex');
          this.$.button.tabIndex = tabindex;
          this._changing = false;
        }
      }
    }

    customElements.define(VaadinButton.is, VaadinButton);
  </script>
</dom-module>
